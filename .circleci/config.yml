# For a detailed guide to building and testing on iOS, read the docs:
# https://circleci.com/docs/2.0/testing-ios/

version: 2.1

jobs:
  build:
    macos:
      xcode: 11.6.0 # Specify the Xcode version to use
      resource_class: large

    steps:
      - checkout
      - run: "bundle install"
      - run: "./ci_scripts/check_version.rb"
      - run: "./ci_scripts/check_public_headers.rb"
      - run: "./ci_scripts/check_category_linking.rb"
      - run: "./ci_scripts/check_resource_bundle.rb"
      - run: "./ci_scripts/check_for_new_localized_strings.sh"
      - run: './ci_scripts/run_ui_tests.sh'
      
      # - run: fastlane scan # Run tests using Fastlane

      # Collect XML test results data to show in the UI, and save the same XML
      # files under test-results folder in the Artifacts tab
      - store_test_results:
          path: test_output
      - store_artifacts:
          path: test_output
          destination: scan-output
